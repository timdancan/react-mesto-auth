{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","contexts/CardContext.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ConfirmDeletePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/Register.js","components/Login.js","images/confirm_icon.svg","images/unconfirm_icon.svg","components/InfoTooltip.js","components/ProtectedRoute.js","utils/Auth.js","components/App.js","index.js"],"names":["Header","exit","email","loggedIn","className","href","target","src","logo","alt","path","to","onClick","CurrentUserContext","React","createContext","Card","name","link","likes","handleCardClick","card","onCardLike","onConfirmeDelete","currentUser","useContext","isOwn","owner","_id","isLiked","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","type","style","backgroundImage","role","aria-label","length","CardContext","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","handleCardLike","handleCardDelete","currentCards","avatar","about","map","item","onCardDelete","handleConfirmeDelete","Footer","year","Date","getFullYear","PopupWithForm","title","buttonText","children","isOpen","onClose","handleSubmit","e","classList","contains","noValidate","onSubmit","ConfirmDeletePopup","id","preventDefault","EditAvatarPopup","onUpdateAvatar","inputEl","useRef","current","value","placeholder","ref","required","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","minLength","maxLength","onChange","AddPlacePopup","setLink","ImagePopup","element","api","url","headers","this","_url","_token","_userUrl","_cardsUrl","_likesUrl","res","ok","json","Promise","reject","status","fetch","authorization","then","_checkResponse","method","body","JSON","stringify","cardId","isNotLiked","Register","onRegister","password","userData","setUserData","handleChange","htmlFor","Login","onLogin","username","InfoTooltip","data","successful","correct","incorrect","ProtectedRoute","Component","component","props","BASE_URL","checkResponse","statusText","App","setCurrentUser","setCurrentCards","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","InfoTooltipOpen","setInfoTooltipOpen","setEmail","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","selectedCard","setSelectedCard","setLoggedIn","history","useHistory","tokenCheck","push","getUserData","console","log","catch","err","getInitialCards","deleteCard","state","filter","c","closeAllPopups","localStorage","getItem","token","getContent","removeItem","Provider","exact","changeLikeCardStatus","newCard","register","authorize","setItem","saveUserChanges","changedAvatar","postNewCard","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.41c17af4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import { Route } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\nimport logo from \"../images/logo.svg\";\r\n\r\nconst Header = ({ exit, email, loggedIn }) => {\r\n\r\n  return (\r\n    <header className=\"header content content_place_header\">\r\n      <a className=\"page-link\" href=\"./\" target=\"_parent\">\r\n        <img className=\"logo\" src={logo} alt=\"логотип\" />\r\n      </a>\r\n      <Route path=\"/sign-in\">\r\n        <Link to=\"sign-up\" className=\"header__link\">\r\n          Регистрация\r\n        </Link>\r\n      </Route>\r\n      <Route path=\"/sign-up\">\r\n        <Link to=\"sign-in\" className=\"header__link\">\r\n          Войти\r\n        </Link>\r\n      </Route>\r\n      <div className={`header__box ${loggedIn ? \"header__box_visiable\" : null}`}>\r\n        <p className=\"header__email\">{email}</p>\r\n        <button\r\n          onClick={() => {\r\n            exit()\r\n          }}\r\n          className=\"header__login-link page-link\"\r\n        >\r\n          Выйти\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react'\r\n\r\nexport const CurrentUserContext = React.createContext()","import { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport React, { useContext } from 'react'\r\n\r\nconst Card = ({name, link, likes, handleCardClick, card, onCardLike, onConfirmeDelete}) => {\r\n  const currentUser = useContext(CurrentUserContext)\r\n  const onCardClick = () => {\r\n    handleCardClick(card)\r\n  }\r\n  const handleLikeClick = () => {\r\n    onCardLike(card)\r\n  }\r\n\r\n  const handleTrashClick = () => {\r\n    onConfirmeDelete(card)\r\n  }\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardDeleteButtonClassName = (\r\n    `element__trash ${isOwn ? null : 'element__trash_hidden'} page-link`\r\n  ); \r\n  const cardLikeButtonClassName = (\r\n    `element__button ${isLiked ? 'element__button_active' : null} page-link`\r\n  )\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleTrashClick}></button>\r\n      <div className=\"element__img\" style={{backgroundImage: `url(${link})`}} role=\"img\" aria-label={name} onClick={onCardClick}></div>\r\n      <div className=\"element__items\">\r\n        <h3 className=\"element__title\">{name}</h3>\r\n        <div className=\"element__container\">\r\n          <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\"></button>\r\n          <span className=\"element__counter\">{likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react'\r\n\r\nexport const CardContext = React.createContext()","import React, { useContext } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { CardContext } from \"../contexts/CardContext\";\r\n\r\nconst Main = ({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, handleCardLike, handleCardDelete, onConfirmeDelete }) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const currentCards = useContext(CardContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile content content_place_profile\">\r\n        <div className=\"profile__content\">\r\n          <div className=\"profile__avatar-container\">\r\n            <img\r\n              src={currentUser.avatar}\r\n              alt=\"Аватар профиля\"\r\n              className=\"profile__avatar\"\r\n            />\r\n            <button\r\n              className=\"profile__avatar-button\"\r\n              onClick={onEditAvatar}\r\n            ></button>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__text\">\r\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n              <button\r\n                className=\"profile__edit-button page-link\"\r\n                type=\"button\"\r\n                onClick={onEditProfile}\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button page-link\"\r\n          type=\"button\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"elements content content_place_elements\">\r\n        {currentCards.map((item) => {\r\n          return (\r\n            <Card\r\n              key={item._id}\r\n              {...item}\r\n              card={item}\r\n              handleCardClick={onCardClick}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              onConfirmeDelete={onConfirmeDelete}\r\n              handleConfirmeDelete={onConfirmeDelete}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","const Footer = () => {\r\n  const year = new Date().getFullYear()\r\n  return (\r\n    <footer className=\"footer content\">\r\n      <p className=\"footer__text\">&copy; {year} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","const PopupWithForm = ({title, name, buttonText, children, isOpen, onClose, handleSubmit}) => {\r\n \r\n  const handleClose = e => {\r\n    if (e.target.classList.contains(\"popup\")) onClose()\r\n  }\r\n\r\n  return (\r\n    <div className={`popup popup_${name} ${isOpen ? 'popup_visiable' : false}`} onClick={handleClose}>\r\n      <div className={`popup__content popup__content_${name}`}>\r\n        <button className={`popup__close popup__close_${name} page-link`} type=\"button\" onClick={onClose}></button>\r\n        <h3 className={`popup__title popup__title_${name}`}>{title}</h3>\r\n        <form\r\n          className={`popup__form popup__form_${name}`}\r\n          name={`popup-${name}`}\r\n          noValidate\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {children}\r\n          <button className={`popup__button popup__button_${name}`} type=\"submit\">\r\n            {buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst ConfirmDeletePopup = ({ isOpen:{ isOpen, card },  onClose, onCardDelete }) => {\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    onCardDelete(card)\r\n  }\r\n  return (\r\n    <PopupWithForm\r\n      id=\"confirm\"\r\n      title=\"Вы уверены?\"\r\n      name=\"confirm\"\r\n      buttonText=\"Да\"\r\n      onClose={onClose}\r\n      isOpen={isOpen}\r\n      handleSubmit={handleSubmit}\r\n    ></PopupWithForm>\r\n  );\r\n};\r\nexport default ConfirmDeletePopup","import { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar }) => {\r\n\r\n  const inputEl = useRef()\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar(inputEl.current.value);\r\n  } \r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      id=\"change\"\r\n      title=\"Обновить аватар\"\r\n      name=\"change\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label popup__label_change\">\r\n        <input\r\n          type=\"url\"\r\n          className=\"popup__input popup__input_change\"\r\n          id=\"input-change\"\r\n          name=\"Url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          ref={inputEl}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-change-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import PopupWithForm from \"./PopupWithForm\";\r\nimport { useState, useContext, useEffect } from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser }) => {\r\n  const [name, setName] = useState('')\r\n  const [description , setDescription ] = useState('')\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const handleNameChange = e => {\r\n    setName(e.target.value)\r\n  }\r\n  const handleDescriptionChange = e => {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      id=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit\"\r\n      buttonText=\"Сохранить\"\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_place_title\"\r\n          id=\"input-title\"\r\n          name=\"Name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          onChange={handleNameChange}\r\n          value={name || ''}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-title-error\"></span>\r\n      </label>\r\n      <label className=\"popup__label\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_place_subtitle\"\r\n          id=\"input-subtitle\"\r\n          name=\"Profession\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={description || ''}\r\n          onChange={handleDescriptionChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-subtitle-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import {useState, useEffect} from \"react\";\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nconst AddPlacePopup = ({ onClose, isOpen, onAddPlace }) => {\r\n\r\n  const [name, setName] = useState('')\r\n  const [link, setLink] = useState('')\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    onAddPlace({\r\n      name: name,\r\n      link: link\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    setName('');\r\n    setLink('');\r\n}, [isOpen]);\r\n\r\n  const handleNameChange = e => {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  const handleLinkChange = e => {\r\n    setLink(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      id=\"add\"\r\n      title=\"Новое место\"\r\n      name=\"add\"\r\n      buttonText=\"Создать\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label popup__label_add\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_add_name\"\r\n          id=\"input-name\"\r\n          name=\"Name\"\r\n          placeholder=\"Название\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          value={name}\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-name-error\"></span>\r\n      </label>\r\n      <label className=\"popup__label popup__label_add\">\r\n        <input\r\n          type=\"url\"\r\n          className=\"popup__input popup__input_add_src\"\r\n          id=\"input-url\"\r\n          name=\"Url\"\r\n          value={link}\r\n          placeholder=\"Ссылка на картинку\"\r\n          onChange={handleLinkChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-url-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;\r\n","const ImagePopup = ({onClose, card}) => {\r\n\r\n  const handleClose = e => {\r\n    if (e.target.classList.contains(\"popup\")) onClose()\r\n  }\r\n\r\n  return (\r\n    <div className={`popup popup_img ${card.isOpen ? 'popup_visiable' : null}`} onClick={handleClose}> \r\n      <div className=\"popup__container\">\r\n        <div className=\"popup__img-container\">\r\n          <img\r\n            src={card.element.link}\r\n            alt={card.element.name}\r\n            className=\"popup__img\"\r\n          />\r\n        </div>\r\n        <p className=\"popup__text\">{card.element.name}</p>\r\n        <button className=\"popup__close popup__close_img page-link\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n","class Api {\r\n  constructor({ url, headers }) {\r\n    this._url = url;\r\n    this._token = headers\r\n    this._userUrl = `${this._url}/users/me`\r\n    this._cardsUrl = `${this._url}/cards`\r\n    this._likesUrl = `${this._url}/cards/likes`;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n\r\n  getUserData() {\r\n    return fetch(this._userUrl, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    })\r\n      .then(this._checkResponse)\r\n  } \r\n\r\n  getInitialCards() {\r\n    return fetch(this._cardsUrl, {\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  saveUserChanges({\r\n    name,\r\n    about\r\n  }) {\r\n    return fetch(this._userUrl, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about,\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changedAvatar(src) {\r\n    return fetch(`${this._userUrl}/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: src\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n  \r\n  postNewCard({\r\n    name,\r\n    link\r\n  }) {\r\n    return fetch(this._cardsUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link,\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._cardsUrl}/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isNotLiked){\r\n      return fetch(`${this._likesUrl}/${cardId}`, {\r\n        method: isNotLiked ? \"PUT\" : \"DELETE\",\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  url:'https://mesto.nomoreparties.co/v1/cohort-20',\r\n  headers:\"424dcfe6-7281-4ce4-8ed0-0018c46e204a\"\r\n})\r\n\r\nexport default api\r\n","import { Link } from \"react-router-dom\";\r\nimport { useState } from 'react';\r\n\r\nexport const Register = ({onRegister}) => {\r\n  const [userData, setUserData] = useState({\r\n    email: '',\r\n    password: '',\r\n  })\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    let {email, password} = userData\r\n    onRegister({ email, password })\r\n  } \r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <p className=\"sign-title\">Регистрация</p>\r\n      <form onSubmit={handleSubmit} className=\"register__form\">\r\n        <label htmlFor=\"email\"></label>\r\n        <input\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={userData.email}\r\n          onChange={handleChange}\r\n          placeholder=\"Email\"\r\n          className=\"sign-input\"\r\n        />\r\n        <label htmlFor=\"password\"></label>\r\n        <input\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={userData.password}\r\n          onChange={handleChange}\r\n          placeholder=\"Пароль\"\r\n          className=\"sign-input\"\r\n        />\r\n        <div className=\"register__button-container\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"sign-button\"\r\n          >\r\n            Зарегистрироваться\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <div className=\"register__signin\">\r\n        <p className=\"register__login-text\">Уже зарегистрированы?</p>\r\n        <Link to=\"/sign-in\" className=\"register__login-link\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { useState } from \"react\"\r\n\r\nexport const Login = ({ onLogin }) => {\r\n  const [userData, setUserData] = useState({\r\n    username: '',\r\n    password: ''\r\n  })\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUserData({\r\n      ...userData,\r\n      [name]: value\r\n    })\r\n  }\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onLogin(userData)\r\n  }\r\n  return (\r\n    <div className=\"register\">\r\n      <p className=\"sign-title\">Вход</p>\r\n      <form onSubmit={handleSubmit} className=\"register__form\">\r\n        <label htmlFor=\"email\"></label>\r\n        <input\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          onChange={handleChange}\r\n          value={userData.username}\r\n          placeholder=\"Email\"\r\n          className=\"sign-input\"\r\n        />\r\n        <label htmlFor=\"password\"></label>\r\n        <input\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          onChange={handleChange}\r\n          value={userData.password}\r\n          placeholder=\"Пароль\"\r\n          className=\"sign-input\"\r\n        />\r\n        <div className=\"register__button-container\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"sign-button\"\r\n          >\r\n            Войти\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/confirm_icon.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/unconfirm_icon.d4ce2a26.svg\";","import correct from \"../images/confirm_icon.svg\";\r\nimport incorrect from '../images/unconfirm_icon.svg'\r\n\r\nexport const InfoTooltip = ({onClose, data}) => {\r\n  return (\r\n    <div className={`popup ${data.isOpen ? \"popup_visiable\" : null}`}>\r\n      <div className={`popup__content popup__content_info`}>\r\n        <button className={`popup__close page-link`} type=\"button\" onClick={onClose}></button>\r\n        <img className=\"info-icon\" src={data.successful ? correct : incorrect} alt=\"confirm\" />\r\n        <p className=\"info-text\">{data.successful ? \"Вы успешно зарегистрировались!\" : \"Что-то пошло не так! Попробуйте ещё раз.\"}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nexport const ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./sign-up\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n","export const BASE_URL = 'https://auth.nomoreparties.co.'\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      \"Content-Type\": \"application/json\" \r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(checkResponse)\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      \"Content-Type\": \"application/json\" \r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(checkResponse)\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then(checkResponse)\r\n}\r\n\r\nconst checkResponse = (res) => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.statusText}`)","import \"../pages/index.css\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport { useState, useEffect } from \"react\";\r\nimport api from \"../utils/api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { CardContext } from \"../contexts/CardContext\";\r\nimport { Redirect, Route, Switch, useHistory } from \"react-router-dom\";\r\nimport { Register } from \"./Register\";\r\nimport { Login } from \"./Login\";\r\nimport { InfoTooltip } from \"./InfoTooltip\";\r\nimport { ProtectedRoute } from \"./ProtectedRoute\";\r\nimport { authorize, getContent, register } from \"../utils/Auth\";\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [currentCards, setCurrentCards] = useState([]);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [InfoTooltipOpen, setInfoTooltipOpen] = useState({\r\n    isOpen: false,\r\n    successful: false,\r\n  });\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = useState({\r\n    isOpen: false,\r\n    card: {},\r\n  });\r\n  const [selectedCard, setSelectedCard] = useState({\r\n    isOpen: false,\r\n    element: {},\r\n  });\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      history.push(\"/\");\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    api\r\n      .getUserData()\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        console.log(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    api\r\n      .getInitialCards()\r\n      .then((data) => {\r\n        setCurrentCards(data);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  const handleCardLike = (card) => {\r\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        setCurrentCards((state) =>\r\n          state.map((c) => (c._id === card._id ? newCard : c))\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const handleCardDelete = (card) => {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCurrentCards((state) => state.filter((c) => c._id !== card._id));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    closeAllPopups();\r\n  };\r\n\r\n  const changeStateEditProfile = () => {\r\n    setEditProfilePopupOpen(true);\r\n  };\r\n\r\n  const changeStateAddPlace = () => {\r\n    setAddPlacePopupOpen(true);\r\n  };\r\n\r\n  const changeStateAvatarProfile = () => {\r\n    setEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  const changeStateConfirmeDelete = (card) => {\r\n    setConfirmDeletePopupOpen({\r\n      ...isConfirmDeletePopupOpen,\r\n      isOpen: true,\r\n      card: card,\r\n    });\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard({ isOpen: true, element: card });\r\n  };\r\n\r\n  const closeAllPopups = () => {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setInfoTooltipOpen({ ...InfoTooltipOpen, isOpen: false });\r\n    setConfirmDeletePopupOpen({ ...isConfirmDeletePopupOpen, isOpen: false });\r\n    setSelectedCard({ ...selectedCard, isOpen: false });\r\n  };\r\n\r\n  const handleUpdateUser = (data) => {\r\n    api\r\n      .saveUserChanges(data)\r\n      .then((data) => {\r\n        setCurrentUser(data)\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleUpdateAvatar = (avatar) => {\r\n    console.log(avatar);\r\n    api\r\n      .changedAvatar(avatar)\r\n      .then((data) => {\r\n        setCurrentUser({ ...currentUser, avatar: data.avatar })\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleAddPlaceSubmit = (data) => {\r\n    console.log(data);\r\n    api\r\n      .postNewCard(data)\r\n      .then((newCard) => {\r\n        setCurrentCards([newCard, ...currentCards])\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const handleRegister = ({ email, password }) => {\r\n    register(email, password)\r\n      .then((data) => { \r\n        console.log(data);\r\n        if (data) {\r\n          setInfoTooltipOpen({ isOpen: true, successful: true });\r\n          history.push(\"/sign-in\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setInfoTooltipOpen({ isOpen: true, successful: false });\r\n      });\r\n  };\r\n\r\n  const handleLogin = ({ email, password }) => {\r\n    return authorize(email, password)\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.token) {\r\n          setLoggedIn(true);\r\n          console.log(email);\r\n          setEmail(email);\r\n          localStorage.setItem(\"token\", data.token);\r\n          history.push(\"/\");\r\n          return;\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const tokenCheck = () => {\r\n    if (localStorage.getItem(\"token\")) {\r\n      const token = localStorage.getItem(\"token\");\r\n      getContent(token).then((data) => {\r\n        if (data) {\r\n          setLoggedIn(true);\r\n          history.push(\"/\");\r\n          setEmail(data.data.email)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        localStorage.removeItem(\"token\");\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteToken = () => {\r\n    localStorage.removeItem(\"token\");\r\n    setLoggedIn(false);\r\n    history.push(\"/sign-in\");\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <CardContext.Provider value={currentCards}>\r\n        <div className=\"App\">\r\n          <div className=\"page\">\r\n            <Header exit={deleteToken} email={email} loggedIn={loggedIn} />\r\n            <Switch>\r\n              <ProtectedRoute\r\n                exact\r\n                path=\"/\"\r\n                loggedIn={loggedIn}\r\n                component={Main}\r\n                onEditProfile={changeStateEditProfile}\r\n                onAddPlace={changeStateAddPlace}\r\n                onEditAvatar={changeStateAvatarProfile}\r\n                onConfirmeDelete={changeStateConfirmeDelete}\r\n                onCardClick={handleCardClick}\r\n                handleCardLike={handleCardLike}\r\n                handleCardDelete={handleCardDelete}\r\n              ></ProtectedRoute>\r\n\r\n              <Route path=\"/sign-up\">\r\n                <Register onRegister={handleRegister} />\r\n              </Route>\r\n\r\n              <Route path=\"/sign-in\">\r\n                <Login onLogin={handleLogin} />\r\n              </Route>\r\n\r\n              <Route>\r\n                {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n              </Route>\r\n            </Switch>\r\n\r\n            <InfoTooltip data={InfoTooltipOpen} onClose={closeAllPopups} />\r\n\r\n            <EditProfilePopup\r\n              isOpen={isEditProfilePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateUser={handleUpdateUser}\r\n            />\r\n            <EditAvatarPopup\r\n              isOpen={isEditAvatarPopupOpen}\r\n              onClose={closeAllPopups}\r\n              onUpdateAvatar={handleUpdateAvatar}\r\n            />\r\n            <AddPlacePopup\r\n              isOpen={isAddPlacePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onAddPlace={handleAddPlaceSubmit}\r\n            />\r\n            <ConfirmDeletePopup\r\n              isOpen={isConfirmDeletePopupOpen}\r\n              onClose={closeAllPopups}\r\n              onCardDelete={handleCardDelete}\r\n            />\r\n\r\n            <ImagePopup onClose={closeAllPopups} card={selectedCard} />\r\n            <Footer />\r\n          </div>\r\n        </div>\r\n      </CardContext.Provider>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport \"./index.css\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(\r\n  <>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}